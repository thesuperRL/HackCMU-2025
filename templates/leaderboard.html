<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>LanternFly Quest — Leaderboard</title>

    <!-- Icons + App CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />

    <!-- Point to Flask static dir -->
    <link rel="stylesheet" href="../static/css/style.css" />

    <style>
      /* Page-specific tweaks (keeps your site CSS intact) */
      .page-header {
        padding: 32px 0 12px;
      }
      .toolbar {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }
      .toolbar .input {
        flex: 1;
        min-width: 220px;
      }
      .input input {
        width: 100%;
        background: var(--bg-elev);
        color: var(--fg);
        border: 1px solid rgba(148, 163, 184, 0.22);
        border-radius: 10px;
        padding: 0.65rem 0.8rem;
      }
      .input input:focus {
        border-color: transparent;
        box-shadow: 0 0 0 6px var(--ring);
        outline: none;
      }

      .board {
        margin-top: 16px;
        border-radius: var(--radius-xl);
        overflow: hidden;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      thead th {
        text-align: left;
        font-weight: 800;
        font-size: 0.95rem;
        color: var(--muted);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.07),
          rgba(255, 255, 255, 0.02)
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        padding: 12px 14px;
        user-select: none;
        cursor: pointer;
      }
      tbody td {
        padding: 14px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      }
      tbody tr:hover {
        background: rgba(255, 255, 255, 0.04);
      }
      .rank {
        font-weight: 800;
        width: 64px;
      }
      .user {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .avatar {
        width: 32px;
        height: 32px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.08);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
      }
      .badge {
        font-size: 0.75rem;
        padding: 0.15rem 0.45rem;
        border-radius: 999px;
        background: rgba(125, 211, 252, 0.2);
        color: var(--fg);
      }
      .muted {
        color: var(--muted);
        font-size: 0.9rem;
      }
      .empty {
        text-align: center;
        padding: 40px;
        color: var(--muted);
        border: 1px dashed rgba(148, 163, 184, 0.35);
        border-radius: var(--radius-xl);
      }
      .sortable .arrow {
        opacity: 0.35;
        margin-left: 6px;
      }
      .sortable.active.asc .arrow {
        transform: rotate(180deg);
        opacity: 1;
      }
      .sortable.active.desc .arrow {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <svg class="logo" viewBox="0 0 24 24" aria-hidden="true">
            <path
              d="M12 2c-2.5 0-4.5 2-4.5 4.5S12 14 12 14s4.5-5 4.5-7.5S14.5 2 12 2zm0 0c-3 0-5.5 2.5-5.5 5.5S9 13 12 13s5.5-2.5 5.5-5.5S15 2 12 2z"
              fill="currentColor"
            />
          </svg>
          <span class="title">LanternFly Quest</span>
          <span class="pill">alpha</span>
        </div>

        <nav class="nav">
          <a href="/">Home</a>
          <a href="/info">About</a>
          <a href="/learn">Learn</a>
          <a href="/report">Report</a>
          <a href="/leaderboard">Leaderboard</a>
        </nav>
        <div class="auth">
          <!-- g_id_onload contains Google Identity Services settings -->
          <div
            id="g_id_onload"
            data-auto_prompt="false"
            data-callback="handleCredentialResponse"
            data-client_id="598997653463-svi76fvbe15v910t9c91eulju4vqasaa.apps.googleusercontent.com"
          ></div>
          <!-- g_id_signin places the button on a page and supports customization -->
          <div
            class="g_id_signin"
            data-theme="filled_blue"
            data-text="signup_with"
          ></div>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="page-header">
        <h1 style="margin: 0 0 0.35rem 0">Leaderboard</h1>
        <p class="muted">
          Live rankings for verified lanternfly kills. Updates automatically.
        </p>
      </section>

      <div class="toolbar">
        <div class="input">
          <input id="searchInput" type="text" placeholder="Search users…" />
        </div>
        <button id="refreshBtn" class="btn secondary">
          <i class="bi bi-arrow-clockwise"></i> Refresh
        </button>
        <button id="seedBtn" class="btn small">
          <i class="bi bi-beaker"></i> Seed Demo
        </button>
        <span class="muted" id="lastSync" aria-live="polite"></span>
      </div>

      <div class="panel board" role="region" aria-label="Leaderboard table">
        <table id="leaderboardTable">
          <thead>
            <tr>
              <th class="sortable" data-key="rank">
                Rank <i class="bi bi-caret-down-fill arrow"></i>
              </th>
              <th>User</th>
              <th class="sortable" data-key="catches">
                Catches <i class="bi bi-caret-down-fill arrow"></i>
              </th>
            </tr>
          </thead>
          <tbody id="leaderboardBody">
            <!-- rows injected by JS -->
          </tbody>
        </table>
        <div id="emptyState" class="empty" hidden>
          <i class="bi bi-emoji-neutral"></i> No scores yet. Report a catch to
          get on the board!
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>LanternFly Quest · v0.1</span>
        <button id="resetDemo" class="btn danger small" title="Reset demo data">
          Reset
        </button>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/leaderboard.js"></script>
  </body>
</html>
